<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>√âcoute Musicale</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height:100vh;
      display:flex;
      justify-content:center;
      align-items:center;
      padding:20px;
      position:relative;
    }

    .container {
      background:white;
      border-radius:24px;
      box-shadow:0 20px 60px rgba(0,0,0,0.3);
      overflow:hidden;
      width:100%;
      max-width:500px;
      position:relative;
      z-index:1;
    }

    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding:50px 30px;
      text-align:center;
      color:white;
    }

    h1 {
      font-size:2.5rem;
      font-weight:700;
      margin-bottom:8px;
      letter-spacing:-0.5px;
    }

    .subtitle {
      font-size:1rem;
      opacity:0.9;
      font-weight:400;
    }

    .content {
      padding:30px;
    }

    .main-buttons {
      display:flex;
      flex-direction:column;
      gap:20px;
      margin-bottom:40px;
    }

    .main-btn {
      padding:22px 25px;
      border:none;
      border-radius:18px;
      font-size:1.3rem;
      font-weight:600;
      cursor:pointer;
      transition: all 0.3s;
      font-family:inherit;
      text-align:left;
      display:flex;
      align-items:center;
      gap:15px;
      position:relative;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color:white;
      box-shadow:0 6px 20px rgba(102,126,234,0.3);
    }

    .main-btn::before {
      content:attr(data-icon);
      font-size:1.8rem;
    }

    .main-btn:hover {
      transform:translateY(-4px);
      box-shadow:0 10px 25px rgba(102,126,234,0.5);
    }

    .main-btn:active {
      transform:translateY(0);
    }

    .fixed-buttons {
      display:flex;
      gap:12px;
      position:sticky;
      bottom:20px;
      margin-top:30px;
    }

    .fixed-btn {
      flex:1;
      padding:14px 20px;
      border:none;
      border-radius:14px;
      font-size:1rem;
      font-weight:600;
      cursor:pointer;
      transition: all 0.3s;
      font-family:inherit;
      text-align:center;
      display:flex;
      align-items:center;
      justify-content:center;
      gap:8px;
    }

    .fixed-btn::before {
      content:attr(data-icon);
      font-size:1.2rem;
    }

    .back-btn {
      background: linear-gradient(135deg, #a8a8a8 0%, #7a7a7a 100%);
      color:white;
      box-shadow:0 4px 12px rgba(0,0,0,0.2);
    }

    .back-btn:hover {
      transform:translateY(-2px);
      box-shadow:0 6px 15px rgba(0,0,0,0.3);
    }

    .logout-btn {
      background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
      color:white;
      box-shadow:0 4px 12px rgba(255, 107, 107, 0.3);
    }

    .logout-btn:hover {
      transform:translateY(-2px);
      box-shadow:0 6px 15px rgba(255, 107, 107, 0.4);
    }

    .music-icon {
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 2rem;
      opacity: 0.8;
    }

    @media (max-width: 480px) {
      .container {
        border-radius: 20px;
      }

      .header {
        padding: 40px 25px;
      }

      h1 {
        font-size: 2rem;
      }

      .content {
        padding: 25px;
      }

      .main-btn {
        padding: 18px 20px;
        font-size: 1.1rem;
      }

      .fixed-buttons {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>

<div class="container">
  <div class="header">
    <h1>√âcoute Musicale</h1>
    <p class="subtitle">Plongez dans l'univers du son</p>
    <div class="music-icon">üéµ</div>
  </div>

  <div class="content">
    <div class="main-buttons">
      <button class="main-btn" id="btnPlaylists" data-icon="üé∂">
        Voir les Playlists
      </button>

      <button class="main-btn" id="btnDjSets" data-icon="üéß">
        √âcouter les Sets DJ
      </button>
    </div>

    <div class="fixed-buttons">
      <button class="fixed-btn back-btn" id="btnBack" data-icon="‚¨ÖÔ∏è">
        Retour au menu
      </button>

      <button class="fixed-btn logout-btn" id="btnLogout" data-icon="üö™">
        D√©connexion
      </button>
    </div>
  </div>
</div>

<script>
  // V√©rifier l'authentification
  const token = localStorage.getItem('accessToken');
  if (!token) {
    alert('Vous devez √™tre connect√© pour acc√©der √† cette page');
    window.location.href = '/connection/connection.html';
  }

  // Bouton Voir les Playlists
  document.getElementById("btnPlaylists").addEventListener("click", () => {
    window.location.href = "/menu/playlist_list.html";
  });

  // Bouton √âcouter les Sets DJ
  document.getElementById("btnDjSets").addEventListener("click", () => {
    //alert("Fonctionnalit√© '√âcouter les Sets DJ' en cours de d√©veloppement");
    window.location.href = "/menu/mixtape.html";
    // √Ä impl√©menter ult√©rieurement
  });

  // Bouton Retour au menu
  document.getElementById("btnBack").addEventListener("click", () => {
    window.location.href = "/menu/menu.html";
  });

  // Bouton D√©connexion
  document.getElementById("btnLogout").addEventListener("click", async () => {
    const refreshToken = localStorage.getItem('refreshToken');
    if (!refreshToken) return;

    try {
      const response = await fetch('/api/auth/logout', {
        method: 'POST',
        headers: { 'Content-Type':'application/json' },
        body: JSON.stringify({ refreshToken })
      });

      if (response.ok) {
        localStorage.removeItem('accessToken');
        localStorage.removeItem('refreshToken');
        localStorage.removeItem('currentUserData');
        alert('D√©connexion r√©ussie');
        window.location.href = '/connection/connection.html';
      } else {
        alert('Erreur lors de la d√©connexion');
      }
    } catch (err) {
      alert('Erreur r√©seau lors de la d√©connexion');
    }
  });
</script>

</body>
</html>